(this.webpackJsonpflights=this.webpackJsonpflights||[]).push([[0],{13:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var i=r(2),a=r(7),s=r.n(a),n=(r(13),r(5)),c=r(8),l=r(1);function o(e,t){var r=t.type,i=t.payload;switch(r){case"SORT_TIME":return Object(l.a)(Object(l.a)({},e),{},{sortPriceDown:!1,sortPriceUp:!1,sortTimeDuration:!0});case"SORT_PRICE_UP":return Object(l.a)(Object(l.a)({},e),{},{sortTimeDuration:!1,sortPriceDown:!1,sortPriceUp:!0});case"SORT_PRICE_DOWN":return Object(l.a)(Object(l.a)({},e),{},{sortTimeDuration:!1,sortPriceUp:!1,sortPriceDown:!0});case"FILTER_NO_TRANSFER":return Object(l.a)(Object(l.a)({},e),{},{filterOneTransfer:!1,filterNoTransfer:!e.filterNoTransfer});case"FILTER_ONE_TRANSFER":return Object(l.a)(Object(l.a)({},e),{},{filterOneTransfer:!e.filterOneTransfer,filterNoTransfer:!1});case"FILTER_PRICE_FROM":return Object(l.a)(Object(l.a)({},e),{},{filterPriceFrom:i.event.target.value});case"FILTER_PRICE_TO":return Object(l.a)(Object(l.a)({},e),{},{filterPriceTo:i.event.target.value});case"SET_FILTER_LIST_COMPANY":return Object(l.a)(Object(l.a)({},e),{},{filterListCompany:i.array});case"SET_FILTER_COMPANY":var a=e.filterSelectCompany.slice();if(0===a.length)return Object(l.a)(Object(l.a)({},e),{},{filterSelectCompany:[i.company[0]]});if(a.includes(i.company[0])){var s=a.filter((function(e){return e!==i.company[0]}));return Object(l.a)(Object(l.a)({},e),{},{filterSelectCompany:s})}return Object(l.a)(Object(l.a)({},e),{},{filterSelectCompany:[].concat(Object(c.a)(e.filterSelectCompany),[i.company[0]])});case"SET_FILTERED_ARRAY":return Object(l.a)(Object(l.a)({},e),{},{filteredArray:i.array});default:return e}}var m=r(0),d=Object(i.createContext)(),u={sortTimeDuration:!1,sortPriceUp:!1,sortPriceDown:!0,filterOneTransfer:!1,filterNoTransfer:!1,filterPriceFrom:0,filterPriceTo:1e6,filterListCompany:[],filterSelectCompany:[],filteredArray:[]},f=function(e){var t=e.children,r=Object(i.useReducer)(o,u),a=Object(n.a)(r,2),s=a[0],c=a[1];return s.sortTime=function(){c({type:"SORT_TIME"})},s.sortPriceUpFunction=function(){c({type:"SORT_PRICE_UP"})},s.sortPriceDownFunction=function(){c({type:"SORT_PRICE_DOWN"})},s.filterListNoTransfer=function(){c({type:"FILTER_NO_TRANSFER"})},s.filterListOneTransfer=function(){c({type:"FILTER_ONE_TRANSFER"})},s.filterPriceFromFunction=function(e){c({type:"FILTER_PRICE_FROM",payload:{event:e}})},s.filterPriceToFunction=function(e){c({type:"FILTER_PRICE_TO",payload:{event:e}})},s.setFilterListCompany=function(e){c({type:"SET_FILTER_LIST_COMPANY",payload:{array:e}})},s.setFilterCompanyBy=function(e){c({type:"SET_FILTER_COMPANY",payload:{company:e}})},s.setFilteredArray=function(e){c({type:"SET_FILTERED_ARRAY",payload:{array:e}})},Object(m.jsx)(d.Provider,{value:s,children:t})},p=function(e){var t=e.flight,r=t.flight,a=r.price,s=r.legs,n=r.carrier,c={departureCity:s[0].segments[0].departureCity.caption,departureAirport:s[0].segments[0].departureAirport.caption,departureAirportUid:s[0].segments[0].departureAirport.uid,departureTime:s[0].segments[0].departureDate.slice(11,16),departureDate:s[0].segments[0].departureDate.slice(0,10),arrivalCity:s[0].segments[s[0].segments.length-1].arrivalCity?s[0].segments[s[0].segments.length-1].arrivalCity.caption:"\u041f\u0443\u0441\u0442\u043e\u0442\u0430",arrivalAirport:s[0].segments[s[0].segments.length-1].arrivalAirport.caption,arrivalAirportUid:s[0].segments[s[0].segments.length-1].arrivalAirport.uid,arrivalTime:s[0].segments[s[0].segments.length-1].arrivalDate.slice(11,16),arrivalDate:s[0].segments[s[0].segments.length-1].arrivalDate.slice(0,10),travelTime:Math.trunc(Number(s[0].duration)/60)+" \u0447 "+Number(s[0].duration)%60+" \u043c\u0438\u043d",transfer:s[0].segments.length>1?s[0].segments.length-1:null},l={departureCity:s[1].segments[0].departureCity?s[1].segments[0].departureCity.caption:"\u041f\u0443\u0441\u0442\u043e\u0442\u0430",departureAirport:s[1].segments[0].departureAirport.caption,departureAirportUid:s[1].segments[0].departureAirport.uid,departureTime:s[1].segments[0].departureDate.slice(11,16),departureDate:s[1].segments[0].departureDate.slice(0,10),arrivalCity:s[1].segments[s[1].segments.length-1].arrivalCity?s[1].segments[s[1].segments.length-1].arrivalCity.caption:"\u041f\u0443\u0441\u0442\u043e\u0442\u0430",arrivalAirport:s[1].segments[s[1].segments.length-1].arrivalAirport.caption,arrivalAirportUid:s[1].segments[s[1].segments.length-1].arrivalAirport.uid,arrivalTime:s[1].segments[s[1].segments.length-1].arrivalDate.slice(11,16),arrivalDate:s[1].segments[s[1].segments.length-1].arrivalDate.slice(0,10),travelTime:Math.trunc(Number(s[1].duration)/60)+" \u0447 "+Number(s[1].duration)%60+" \u043c\u0438\u043d",transfer:s[1].segments.length>1?s[1].segments.length-1:null},o=Object(i.useContext)(d).filteredArray,u=t.faded?"hidden-none":"";return Object(i.useEffect)((function(){}),[o]),Object(m.jsxs)("div",{className:"flight-item ".concat(u),children:[Object(m.jsxs)("header",{className:"flight-item__header",children:[Object(m.jsx)("div",{className:"flight-item__logo",children:Object(m.jsx)("img",{src:"/flights/logo.png",alt:"Logo",className:"flight-item__picture"})}),Object(m.jsxs)("div",{className:"flight-item__info_header",children:[Object(m.jsxs)("p",{className:"flight-item__price",children:[a.total.amount," ",a.total.currency]}),Object(m.jsx)("p",{className:"flight-item__text",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u0432\u0437\u0440\u043e\u0441\u043b\u043e\u0433\u043e \u043f\u0430\u0441\u0441\u0430\u0436\u0438\u0440\u0430"})]})]}),Object(m.jsxs)("div",{className:"flight-item__departure",children:[Object(m.jsxs)("div",{className:"flight-item__body",children:[Object(m.jsxs)("div",{className:"flight-item__way",children:[Object(m.jsxs)("p",{className:"flight-item__from",children:[c.departureCity,","," ",c.departureAirport," (",c.departureAirportUid,")"]}),Object(m.jsxs)("p",{className:"flight-item__to",children:[c.arrivalCity,","," ",c.arrivalAirport," (",c.arrivalAirportUid,")"]})]}),Object(m.jsxs)("div",{className:"flight-item__info",children:[Object(m.jsxs)("div",{className:"flight-item__timedate flight-item__timedate_departure",children:[Object(m.jsx)("p",{className:"flight-item__time",children:c.departureTime}),Object(m.jsx)("p",{className:"flight-item__date",children:c.departureDate})]}),Object(m.jsx)("p",{className:"flight-item__duration",children:c.travelTime}),Object(m.jsxs)("div",{className:"flight-item__timedate flight-item__timedate_arrival",children:[Object(m.jsx)("p",{className:"flight-item__time",children:c.arrivalTime}),Object(m.jsx)("p",{className:"flight-item__date",children:c.arrivalDate})]})]}),c.transfer&&Object(m.jsx)("div",{className:"flight-item__transfer",children:Object(m.jsxs)("p",{className:"flight-item__transfer-number",children:[c.transfer," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"]})})]}),Object(m.jsx)("footer",{className:"flight-item__footer",children:Object(m.jsxs)("p",{className:"flight-item__carrier",children:["\u0420\u0435\u0439\u0441 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442: ",n.caption]})})]}),Object(m.jsxs)("div",{className:"flight-item__arrival",children:[Object(m.jsxs)("div",{className:"flight-item__body",children:[Object(m.jsxs)("div",{className:"flight-item__way",children:[Object(m.jsxs)("p",{className:"flight-item__from",children:[l.departureCity,","," ",l.departureAirport," (",l.departureAirportUid,")"]}),Object(m.jsxs)("p",{className:"flight-item__to",children:[l.arrivalCity,","," ",l.arrivalAirport," (",l.arrivalAirportUid,")"]})]}),Object(m.jsxs)("div",{className:"flight-item__info",children:[Object(m.jsxs)("div",{className:"flight-item__timedate flight-item__timedate_departure",children:[Object(m.jsx)("p",{className:"flight-item__time",children:l.departureTime}),Object(m.jsx)("p",{className:"flight-item__date",children:l.departureDate})]}),Object(m.jsx)("p",{className:"flight-item__duration",children:l.travelTime}),Object(m.jsxs)("div",{className:"flight-item__timedate flight-item__timedate_arrival",children:[Object(m.jsx)("p",{className:"flight-item__time",children:l.arrivalTime}),Object(m.jsx)("p",{className:"flight-item__date",children:l.arrivalDate})]})]}),l.transfer&&Object(m.jsx)("div",{className:"flight-item__transfer",children:Object(m.jsxs)("p",{className:"flight-item__transfer-number",children:[l.transfer," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"]})})]}),Object(m.jsx)("footer",{className:"flight-item__footer",children:Object(m.jsxs)("p",{className:"flight-item__carrier",children:["\u0420\u0435\u0439\u0441 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442: ",n.caption]})})]}),Object(m.jsx)("button",{className:"flight-item__btn",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})]})};var j=function(e){var t=e.flights,r=Object(i.useContext)(d),a=r.sortTimeDuration,s=r.sortPriceUp,n=r.sortPriceDown,c=r.filterNoTransfer,l=r.filterOneTransfer,o=r.filterPriceFrom,u=r.filterPriceTo,f=r.filterSelectCompany,j=r.setFilteredArray,h=r.filteredArray;return Object(i.useEffect)((function(){var e=t.slice();if(a){var r=e.slice().sort((function(e,t){return e.flight.legs.reduce((function(e,t){return e+t.duration}),0)-t.flight.legs.reduce((function(e,t){return e+t.duration}),0)}));e=r}if(s){var i=e.slice().sort((function(e,t){return t.flight.price.total.amount-e.flight.price.total.amount}));e=i}if(n){var m=e.slice().sort((function(e,t){return e.flight.price.total.amount-t.flight.price.total.amount}));e=m}if(c){var d=e.slice().filter((function(e){return 2===e.flight.legs.reduce((function(e,t){return t.segments.length+e}),0)}));e=d}if(l){var p=e.slice().filter((function(e){return e.flight.legs.reduce((function(e,t){return t.segments.length+e}),0)>3}));e=p}e=(e=e.filter((function(e){var t=Number(e.flight.price.total.amount);return t<=u&&t>=o}))).map((function(e){if(0===f.length)e.faded=!1;else{var t=e.flight.carrier.caption;e.faded=!0,f.forEach((function(r){return t===r&&(e.faded=!1),r}))}return e})),j(e)}),[a,s,n,c,l,o,u,f,t]),Object(m.jsx)("div",{className:"flights-list",children:h.length>0?h.map((function(e,t){return Object(m.jsx)(p,{flight:e},t)})):Object(m.jsx)("p",{children:"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"})})};var h=function(e){var t=e.item,r=Object(i.useContext)(d).setFilterCompanyBy;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"sidebar-group__item",children:[Object(m.jsx)("input",{className:"",type:"checkbox",name:"company_by",id:"",onChange:function(){return r(t.name)}}),t.name," \u043e\u0442 ",t.price," \u0440\u0443\u0431."]})})};var g=function(){var e=Object(i.useContext)(d),t=e.sortTime,r=e.sortTimeDuration,a=e.sortPriceUp,s=e.sortPriceUpFunction,n=e.sortPriceDown,c=e.sortPriceDownFunction,l=e.filterNoTransfer,o=e.filterListNoTransfer,u=e.filterOneTransfer,f=e.filterListOneTransfer,p=e.filterPriceTo,j=e.filterPriceToFunction,g=e.filterPriceFrom,_=e.filterPriceFromFunction,b=e.filterListCompany,O=e.setFilterListCompany,v=e.filteredArray;return Object(i.useEffect)((function(){for(var e=[],t=0;t<v.length;t++)e.includes(v[t].flight.carrier.caption)||e.push(v[t].flight.carrier.caption);e.map((function(t,r){var i=v.filter((function(e){return e.flight.carrier.caption===t})),a=1e6;return i.map((function(e){return e.flight.price.total.amount<a?a=Number(e.flight.price.total.amount):e})),e[r]={name:[t],price:Number(a)},t})).sort((function(e,t){return e.price-t.price})),O(e)}),[v]),Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsxs)("div",{className:"sidebar__group sidebar-group",children:[Object(m.jsx)("p",{className:"sidebar-group__caption",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(m.jsxs)("div",{className:"sidebar-group__item",children:[Object(m.jsx)("input",{className:"sidebar-group__item",type:"radio",name:"sort_by",checked:n,onChange:function(){c()}})," ","\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0446\u0435\u043d\u044b"]}),Object(m.jsxs)("div",{className:"sidebar-group__item",children:[Object(m.jsx)("input",{className:"sidebar-group__item",type:"radio",name:"sort_by",checked:a,onChange:function(){s()}})," ","\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0446\u0435\u043d\u044b"]}),Object(m.jsxs)("div",{className:"sidebar-group__item",children:[Object(m.jsx)("input",{className:"sidebar-group__item",type:"radio",name:"sort_by",checked:r,onChange:function(){t()}})," ","\u041f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432 \u043f\u0443\u0442\u0438"]})]}),Object(m.jsxs)("div",{className:"sidebar__group sidebar-group",children:[Object(m.jsx)("p",{className:"sidebar-group__caption",children:"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{className:"sidebar-group__item",type:"checkbox",name:"",id:"",checked:u,onChange:function(){f()}})," ","- 1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{className:"sidebar-group__item",type:"checkbox",name:"",id:"",checked:l,onChange:function(){o()}})," ","- \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"]})]}),Object(m.jsxs)("div",{className:"sidebar__group sidebar-group",children:[Object(m.jsx)("p",{className:"sidebar-group__caption",children:"\u0426\u0435\u043d\u0430"}),Object(m.jsxs)("div",{children:["\u041e\u0442",Object(m.jsx)("input",{className:"sidebar-group__item",type:"text",name:"",id:"",onChange:function(e){return _(e)},value:g})]}),Object(m.jsxs)("div",{children:[" ","\u0414\u043e",Object(m.jsx)("input",{className:"sidebar-group__item",type:"text",name:"",id:"",onChange:function(e){return j(e)},value:p})]})]}),Object(m.jsxs)("div",{className:"sidebar__group sidebar-group",children:[Object(m.jsx)("p",{className:"sidebar-group__caption",children:"\u0410\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),b.length>0?b.map((function(e,t){return Object(m.jsx)(h,{item:e},t)})):Object(m.jsx)("p",{children:"\u043d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"})]})]})};var _=function(){var e=Object(i.useState)([]),t=Object(n.a)(e,2),r=t[0],a=t[1];return Object(i.useEffect)((function(){fetch("flights.json").then((function(e){return e.json()})).then((function(e){a(e.result.flights)}))}),[]),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(f,{children:[Object(m.jsx)(g,{}),Object(m.jsx)(j,{flights:r})]})})};s.a.render(Object(m.jsx)(_,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ede3d35d.chunk.js.map